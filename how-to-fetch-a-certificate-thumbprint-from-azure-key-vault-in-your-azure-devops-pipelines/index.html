<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.22.0"/><meta name="description" content="If you for whatever reason need to read your certificates thumbprint(or other public certificate information), such as when deploying to an on-premise…" data-gatsby-head="true"/><meta property="og:title" content="How to fetch a certificate thumbprint from Azure Key Vault in your Azure DevOps pipelines" data-gatsby-head="true"/><meta property="og:description" content="If you for whatever reason need to read your certificates thumbprint(or other public certificate information), such as when deploying to an on-premise…" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta name="twitter:card" content="summary" data-gatsby-head="true"/><meta name="twitter:creator" content="" data-gatsby-head="true"/><meta name="twitter:title" content="How to fetch a certificate thumbprint from Azure Key Vault in your Azure DevOps pipelines" data-gatsby-head="true"/><meta name="twitter:description" content="If you for whatever reason need to read your certificates thumbprint(or other public certificate information), such as when deploying to an on-premise…" data-gatsby-head="true"/><style data-href="/styles.b1ac3bf2858d36b3314d.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}


/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}:root{--maxWidth-none:"none";--maxWidth-xs:20rem;--maxWidth-sm:24rem;--maxWidth-md:28rem;--maxWidth-lg:32rem;--maxWidth-xl:36rem;--maxWidth-2xl:42rem;--maxWidth-3xl:48rem;--maxWidth-4xl:56rem;--maxWidth-full:"100%";--maxWidth-wrapper:var(--maxWidth-2xl);--spacing-px:"1px";--spacing-0:0;--spacing-1:0.25rem;--spacing-2:0.5rem;--spacing-3:0.75rem;--spacing-4:1rem;--spacing-5:1.25rem;--spacing-6:1.5rem;--spacing-8:2rem;--spacing-10:2.5rem;--spacing-12:3rem;--spacing-16:4rem;--spacing-20:5rem;--spacing-24:6rem;--spacing-32:8rem;--fontFamily-sans:Montserrat,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--fontFamily-serif:"Merriweather","Georgia",Cambria,"Times New Roman",Times,serif;--font-body:var(--fontFamily-serif);--font-heading:var(--fontFamily-sans);--fontWeight-normal:400;--fontWeight-medium:500;--fontWeight-semibold:600;--fontWeight-bold:700;--fontWeight-extrabold:800;--fontWeight-black:900;--fontSize-root:16px;--lineHeight-none:1;--lineHeight-tight:1.1;--lineHeight-normal:1.5;--lineHeight-relaxed:1.625;--fontSize-0:0.833rem;--fontSize-1:1rem;--fontSize-2:1.2rem;--fontSize-3:1.44rem;--fontSize-4:1.728rem;--fontSize-5:2.074rem;--fontSize-6:2.488rem;--fontSize-7:2.986rem;--color-primary:#005b99;--color-text:#2e353f;--color-text-light:#4f5969;--color-heading:#1a202c;--color-heading-black:#000;--color-accent:#d1dce5}*,:after,:before{box-sizing:border-box}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:var(--fontSize-root);line-height:var(--lineHeight-normal)}body{color:var(--color-text);font-family:var(--font-body);font-size:var(--fontSize-1)}footer{padding:var(--spacing-6) var(--spacing-0)}hr{background:var(--color-accent);border:0;height:1px}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);letter-spacing:-.025em;line-height:var(--lineHeight-tight);margin-bottom:var(--spacing-6);margin-top:var(--spacing-12)}h2,h3,h4,h5,h6{color:var(--color-heading);font-weight:var(--fontWeight-bold)}h1{color:var(--color-heading-black);font-size:var(--fontSize-6);font-weight:var(--fontWeight-black)}h2{font-size:var(--fontSize-5)}h3{font-size:var(--fontSize-4)}h4{font-size:var(--fontSize-3)}h5{font-size:var(--fontSize-2)}h6{font-size:var(--fontSize-1)}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}p{--baseline-multiplier:0.179;--x-height-multiplier:0.35;line-height:var(--lineHeight-relaxed);margin:var(--spacing-0) var(--spacing-0) var(--spacing-8) var(--spacing-0)}ol,p,ul{padding:var(--spacing-0)}ol,ul{list-style-image:none;list-style-position:outside;margin-bottom:var(--spacing-8);margin-left:var(--spacing-0);margin-right:var(--spacing-0)}ol li,ul li{padding-left:var(--spacing-0)}li>p,ol li,ul li{margin-bottom:calc(var(--spacing-8)/2)}li :last-child{margin-bottom:var(--spacing-0)}li>ul{margin-left:var(--spacing-8);margin-top:calc(var(--spacing-8)/2)}blockquote{border-left:var(--spacing-1) solid var(--color-primary);color:var(--color-text-light);font-size:var(--fontSize-2);font-style:italic;margin-bottom:var(--spacing-8);margin-left:calc(var(--spacing-6)*-1);margin-right:var(--spacing-8);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-6)}blockquote>:last-child{margin-bottom:var(--spacing-0)}blockquote>ol,blockquote>ul{list-style-position:inside}table{border-collapse:collapse;border-spacing:.25rem;margin-bottom:var(--spacing-8);width:100%}table thead tr th{border-bottom:1px solid var(--color-accent)}a{color:var(--color-primary)}a:focus,a:hover{text-decoration:none}.global-wrapper{margin:var(--spacing-0) auto;max-width:var(--maxWidth-wrapper);padding:var(--spacing-10) var(--spacing-5)}.global-wrapper[data-is-root-path=true] .bio{margin-bottom:var(--spacing-20)}.global-header{margin-bottom:var(--spacing-12)}.main-heading{font-size:var(--fontSize-7);margin:0}.post-list-item{margin-bottom:var(--spacing-8);margin-top:var(--spacing-8)}.post-list-item p{margin-bottom:var(--spacing-0)}.post-list-item h2{color:var(--color-primary);font-size:var(--fontSize-4);margin-bottom:var(--spacing-2);margin-top:var(--spacing-0)}.post-list-item header{margin-bottom:var(--spacing-4)}.header-link-home{font-family:var(--font-heading);font-size:var(--fontSize-2);font-weight:var(--fontWeight-bold);text-decoration:none}.bio{display:flex;margin-bottom:var(--spacing-16)}.bio p,.bio-avatar{margin-bottom:var(--spacing-0)}.bio-avatar{border-radius:100%;margin-right:var(--spacing-4);min-width:50px}.blog-post header h1{margin:var(--spacing-0) var(--spacing-0) var(--spacing-4) var(--spacing-0)}.blog-post header p{font-family:var(--font-heading);font-size:var(--fontSize-2)}.blog-post-nav ul{margin:var(--spacing-0)}.gatsby-highlight{margin-bottom:var(--spacing-8)}@media (max-width:42rem){blockquote{margin-left:var(--spacing-0);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-4)}ol,ul{list-style-position:inside}}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><title data-gatsby-head="true">How to fetch a certificate thumbprint from Azure Key Vault in your Azure DevOps pipelines | Rasmus Valbro Højte</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="alternate" type="application/rss+xml" title="Rasmus Valbro Højte&#x27;s personal site Feed" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=51d157316eca988140c7c378cf615fcb" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=51d157316eca988140c7c378cf615fcb"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=51d157316eca988140c7c378cf615fcb"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=51d157316eca988140c7c378cf615fcb"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=51d157316eca988140c7c378cf615fcb"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=51d157316eca988140c7c378cf615fcb"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=51d157316eca988140c7c378cf615fcb"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=51d157316eca988140c7c378cf615fcb"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=51d157316eca988140c7c378cf615fcb"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-wrapper" data-is-root-path="false"><header class="global-header"><a class="header-link-home" href="/">Rasmus Valbro Højte</a></header><main><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">How to fetch a certificate thumbprint from Azure Key Vault in your Azure DevOps pipelines</h1><p>February 20, 2022</p></header><section itemProp="articleBody"><p>If you for whatever reason need to read your certificates thumbprint(or other public certificate information), such as when deploying to an on-premise environment, then this post can help you.</p>
<p>I needed to do this because we have to feed the IIS Management task the thumbprint for the certificate installed on the server to run HTTPS.</p>
<h2>First method: Using the Azure PowerShell Task</h2>
<p>This method is definitely a little more cumbersome than the second method, but will be safer, if you don’t want to expose your entire PFX, including secrets. This method instead basis itself on creating a service principal with only rights to read public information about your certificate. On the other hand, linking an Azure DevOps library to a Key Vault requires permission to read secrets as well.</p>
<h3>Prerequisites</h3>
<ul>
<li>This method uses the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/deploy/azure-powershell?view=azure-devops">Azure PowerShell task</a></li>
<li>Key Vault set up with certificate already set up</li>
<li>If you run on Azure’s deployment agents, you can ignore this bullet, but if you run your own agents, you need to install the <a href="https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-7.1.0">Azure PowerShell Module</a>, and ensure you run a sufficient version of PowerShell(7.1.0~ at the time of writing)</li>
</ul>
<h3>Pipeline setup</h3>
<p>Add an Azure PowerShell task to your pipeline. Configure it as an inline script.</p>
<p>Give the task a service connection with a certificate read access principal. See more on this in the next section. Choose to use the latest version of PowerShell.</p>
<p>Add the following script, but replace the variable with your own key vault name and certificate name:</p>
<p>$Thumbprint = (Get-AzKeyVaultCertificate -VaultName “ReplaceWithKeyVaultName” -Name “ReplaceWithCertificateName”).Thumbprint</p>
<p>Write-Host “The thumbprint is $Thumbprint”</p>
<p>Write-Host “##vso[task.setvariable variable=Tp]$Thumbprint”</p>
<p>This script will grab the certificate’s public info, and set the Thumbprint variable with the certificate’s thumbprint value.</p>
<p>The task.setvariable function is a logging command that allows you to assign a pipeline variable at runtime. In this case we pipe it into a variable that’ll be accessible as $(Tp), which can be used like any other pipeline variable wherever you need it.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/8b594a37b5c210c8015c500e45325f29/2bef9/logged_output-1024x339.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 32.911392405063296%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABP0lEQVQoz4WQy26cQBBFm+4GBmiezYBnTPMSITOxFTlW/v/Xjg2MpSwSZXFUtblXp0rY2rJRVCVKK6SS+9S+3lFKobX+J77vY60lSQxVZRHd5LgOHZf+SmZznroLVWNJCkOSG4wxnE6nPbyV/w3P8xBCUNQN4vf7L97f3vj5+kJdlazLwjwOXNqWp7Yhz1N8X+2B/7IVN/1K4xZq942iGYjLC2ndUbQ9qb0SFy1RVqPjEhmmqCBCBjFChQfSR6gAoSOEkIjl+51lvbHeXnDDzDAtzMtK50Y6N9CPM+O80I8TwzAxjdP+s8PK+8PwsefuB3l3I3OvZM93KnfD9ndMMxJkZ5Q5I5MzXlQgQ7NbiiBF6Pgwk8ExNzyJCIucMM84lQVBduxxWRJVJXFZ4ekQ4enjNPlV8Dh1t3qwlX0afgAPLKDK4+EHUwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="logged output 1024x339"
        title="logged output 1024x339"
        src="/static/8b594a37b5c210c8015c500e45325f29/f058b/logged_output-1024x339.png"
        srcset="/static/8b594a37b5c210c8015c500e45325f29/c26ae/logged_output-1024x339.png 158w,
/static/8b594a37b5c210c8015c500e45325f29/6bdcf/logged_output-1024x339.png 315w,
/static/8b594a37b5c210c8015c500e45325f29/f058b/logged_output-1024x339.png 630w,
/static/8b594a37b5c210c8015c500e45325f29/40601/logged_output-1024x339.png 945w,
/static/8b594a37b5c210c8015c500e45325f29/2bef9/logged_output-1024x339.png 1024w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<h3>Creating the service connection</h3>
<p>Here it’s assumed that you already have a key vault an certificate configured.</p>
<p>First thing you need to do is create an application in your Azure AD.<br>
Add a regular text secret to the application as well. You’ll need this for the service connection.</p>
<p>Now go to your key vault, and add the following access policy. Give Get and List access on certificates, and select your newly created application as the service principal, and save.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/79b81fe38f5ca649d9856b833b697c98/2bef9/access_config-1-1024x485.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 47.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABG0lEQVQoz3WRi27DIAxF8///uG7SJq1NQ0J422DuBE2rpO2QLBvbOlyb4XRecPpdMFqCCoLJFyhfoGMz2fzRlpDxdVlwMYTJZVwdQ/mM2TMGpojCCZAMYUIt/DDJDKDi3Vn1DD2NsFrBrXP30RkM0VkwMyIxLvMKGxkmEExgrIGQi3RArfVhUivO04zrOEIphRgjmAk5ZwwfowMRw6WMn8kgEYGLoEhFlhtgD2ynARNnEBFSShCRh/LhWzOyAMQM68KW3sas74HNZ+bDCu714Z5oY4fgd8VXyD6eV4PgfVfZFJZSOmOQraldjDF9D/9BjvFtjv1uu8J7UwMtywJr7csY7+J9zz4+ALXW8N6/vPoMLCL4VKl/Hp4U/gFV4cM7nLK7XAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="access config 1 1024x485"
        title="access config 1 1024x485"
        src="/static/79b81fe38f5ca649d9856b833b697c98/f058b/access_config-1-1024x485.png"
        srcset="/static/79b81fe38f5ca649d9856b833b697c98/c26ae/access_config-1-1024x485.png 158w,
/static/79b81fe38f5ca649d9856b833b697c98/6bdcf/access_config-1-1024x485.png 315w,
/static/79b81fe38f5ca649d9856b833b697c98/f058b/access_config-1-1024x485.png 630w,
/static/79b81fe38f5ca649d9856b833b697c98/40601/access_config-1-1024x485.png 945w,
/static/79b81fe38f5ca649d9856b833b697c98/2bef9/access_config-1-1024x485.png 1024w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Before you can set up the service connection you also need to assign the reader role to your application on your subscription. Go to your subscription, and navigate to the role assignment.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/4261ea365953164c16f5118033c6fd4a/2bef9/subscription_access-1-1024x450.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 43.67088607594937%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAw0lEQVQoz51RXW/DMAj0//+hfejWJlb8QQFzE3a9ZF37EqQTBsFx4HD5WnC53vB9W0AskGYQteFPIJScwFQhwoAZhtlphDUxEikePJR50uw8wn2NIFYQcU+01ro/ayGuC1gU65YRY0StFaptLH6Y/Bp/VMjMvbiQgHgnUtV97FP5ft//NocGb/Qgp9Q/ZpJt29bVUq0opcAHTxUi0jHi9meDkHPuj9nkSpzQGzye8NwneO0v4fE2TnaEPT/IXvLvMAl/ANabx7kZ+bqlAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="subscription access 1 1024x450"
        title="subscription access 1 1024x450"
        src="/static/4261ea365953164c16f5118033c6fd4a/f058b/subscription_access-1-1024x450.png"
        srcset="/static/4261ea365953164c16f5118033c6fd4a/c26ae/subscription_access-1-1024x450.png 158w,
/static/4261ea365953164c16f5118033c6fd4a/6bdcf/subscription_access-1-1024x450.png 315w,
/static/4261ea365953164c16f5118033c6fd4a/f058b/subscription_access-1-1024x450.png 630w,
/static/4261ea365953164c16f5118033c6fd4a/40601/subscription_access-1-1024x450.png 945w,
/static/4261ea365953164c16f5118033c6fd4a/2bef9/subscription_access-1-1024x450.png 1024w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Now you can configure your service connection in Azure DevOps with the variables from your subscription and service principal. In Azure DevOps navigate to the new service connection wizard. Select Azure Resource Manager as your connection type, and select the option to authenticate using a manual service principal.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 505px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/bcc6c0a5b82f2ccc6d39d8858ae501b7/c0cb9/service_con-1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 182.91139240506325%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAE10lEQVRIx31W53rbOBDUc1zOcokqVWiJvYmkusQiO/3Oce79n2LumyVBS46dH/MBBInF7s7sgq3ddovA9xAGPqIwaObn4JrnOoKg/o4I6zEIfSROjHydoeV7Lr5/+4qnf//Bj+/f8Ov5Jz5/epTnr18+y/zn0xP++/UscB0b45GG6WSMe30qI40axgy2Y6HFU7ebNYo8Exz2O5RFgYfTCdnxgNOplDnfPZxKWeP3WXaE73ti1LZMzGf3cB0HLce2ZGERhYgXURMOn01j3njCDQTXCMs05Hl2rwv4DW2JQYbN0xkyQ+T8y+dP4k2axPKeG9Tmc6iDOLftOmQu0Ct6SBLieCGG1qsldtuNrKnNbxmdnRtkkpdpgs16JaBRhsnEj7ShYDweyRpBo8Z89hsYgWWZlUF6cNjvQQmtlksk8QKLMMAqjbEIfaTJQg6jx9PJpDpkpDWH6tOpGKWdlue5Eh5Z3O+2OB722O/3WO8ybA8FNvsCq81eSGJa9OkEk/HoAvSORPHQlm1ZIlyVv0rcPizbhWHZsBwPhmFKuDSmSHgL69WqYnm1TEV/9FDBmKmkUzJ6k6s/GqSHzCF1SA8Juv7x7haDXheDfg2Z9zAc9H8D1xk29zHH4iFjP5Ul8uwoOSTrSbpEkGwQxGtE6Q6OF/5Ri/ReQmYOZ/WHqiLoMddNwrRgWTYMw5DQ3wpVGV0rUuiRyh3dVsaZvxfo7+buwiBDZu6UsCmhdyviD3jxsM4hvWMXOZUFttuNFP8Fs/Wc629BcqhYJkOUTiXeUEZ6Tl26riPVQ8+jwMdoOEC38xG9LtGRuTYcXLJMY2SZDJdFLnOWobDOnlgWOByOWO9yBPEKXpjCi1J4YYIoirBMYyFyRYNCyjKVsJXAFZRGq7BMYd2ybViWBdt2YNs2HIH1Iht2iIVfdW02BYqURc+RpUa2VaufjDXo03HFul5BvT+TjQE93CAvShTZUSS0TFNxnx5Wrd1GEscSBev+PQnVsjHR0V0Jx3edptGSBBriZo4kikl/r3tfyGa7SnHYbaU7s+1TQswdPyR75168JR31zVlzsOTG4nVAD9gjubHKoY77e12koRqCdobh6+ZAQzQS1Q1UdZ0kiYV9hp4miRzGw/n9zLAwM50aLmZzCvuslg9ZiW9fv8iFz1uvKPLmHi7yXHTIW5DPnx4fcMxLFOUjyodHFKdHIdScz+C5bpVDz/OQpolUhCLivSZw3nQF91XzlVuPlxQ9JBn0iCGTwdc32jkhqrVVo1kL37y8Rk3DEP2pHMlPke9VBJ3Nw8CDNuyj3+2g3+tg0OtIPfPmU3205YhoF1LDrJbj4YDsWNUwaznPM3mXZxm2+wy2G8C0PVj16NQOvIRMHW7WsoEaLMuiIuJUyrr6lWPXsV0fXhAJ/DCG50eiDnYl+WliyLTKDSw3Fjq19xqqXqvanTSYcazfNzk0TUPaz6/nJ8SLsLl7X5cW19Wf2FsH6pNxFTI7S6fbR384wkCb4O7uFrc317i7vWnAZ9V9+r1u1ZEU+Dsy0oQcrrdYOtrUgB3tYIVbDEZTtP/+gOv2VYOrD3/JHxmJGg4HkrcFKypeyG8xo9S0oZRni9rqdDroDzT0+kN0Ol3x6BI3uG630b66qubX7QY31+06ihsY8zn+B81HwfXZdJ6cAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="service con 1"
        title="service con 1"
        src="/static/bcc6c0a5b82f2ccc6d39d8858ae501b7/c0cb9/service_con-1.png"
        srcset="/static/bcc6c0a5b82f2ccc6d39d8858ae501b7/c26ae/service_con-1.png 158w,
/static/bcc6c0a5b82f2ccc6d39d8858ae501b7/6bdcf/service_con-1.png 315w,
/static/bcc6c0a5b82f2ccc6d39d8858ae501b7/c0cb9/service_con-1.png 505w"
        sizes="(max-width: 505px) 100vw, 505px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Now you should be good to throw it into your Azure PowerShell task, and give it a go!</p>
<h2>Second method: Connect an Azure DevOps library to a key vault</h2>
<p>This method is way simpler, but will expose your full certificate, including private keys. As above, create a service connection, but add the option to list and get secrets.</p>
<p>You can now simply create a library in Azure DevOps, and choose the option to link it to your certificates using the service connection. The certificate will be available as a Base64-encoded string under the certificate’s own variable name.</p>
<p>You can simply use Powershell to read the certificate string and parse it into an X509 certificate, and assign it to a runtime variable using the task.setvariable function mentioned in the first approach.</p></section><hr/><footer><div class="bio"><div data-gatsby-image-wrapper="" style="width:50px;height:50px" class="gatsby-image-wrapper bio-avatar"><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8c848;width:50px;height:50px;position:relative"></div><picture><source type="image/avif" data-srcset="/static/51d157316eca988140c7c378cf615fcb/d4bf4/profile-pic.avif 50w,/static/51d157316eca988140c7c378cf615fcb/ee81f/profile-pic.avif 100w" sizes="50px"/><source type="image/webp" data-srcset="/static/51d157316eca988140c7c378cf615fcb/3faea/profile-pic.webp 50w,/static/51d157316eca988140c7c378cf615fcb/6a679/profile-pic.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" data-src="/static/51d157316eca988140c7c378cf615fcb/e5610/profile-pic.png" data-srcset="/static/51d157316eca988140c7c378cf615fcb/e5610/profile-pic.png 50w,/static/51d157316eca988140c7c378cf615fcb/e9b55/profile-pic.png 100w" alt="Profile picture"/></picture><noscript><picture><source type="image/avif" srcSet="/static/51d157316eca988140c7c378cf615fcb/d4bf4/profile-pic.avif 50w,/static/51d157316eca988140c7c378cf615fcb/ee81f/profile-pic.avif 100w" sizes="50px"/><source type="image/webp" srcSet="/static/51d157316eca988140c7c378cf615fcb/3faea/profile-pic.webp 50w,/static/51d157316eca988140c7c378cf615fcb/6a679/profile-pic.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" src="/static/51d157316eca988140c7c378cf615fcb/e5610/profile-pic.png" srcSet="/static/51d157316eca988140c7c378cf615fcb/e5610/profile-pic.png 50w,/static/51d157316eca988140c7c378cf615fcb/e9b55/profile-pic.png 100w" alt="Profile picture"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><p>Hi, I&#x27;m Rasmus. This portfolio is mainly a recreational outlet that I return to once in a while.<!-- --><br/>You can find me on<!-- --><a href="https://www.linkedin.com/in/rasmus-h%C3%B8jte-4a2326110/">LinkedIn</a>and <!-- --><a href="https://github.com/FrankDrebin893">Github</a>.<!-- --><br/>I also post terrible sound bites to<!-- --><a href="https://soundcloud.com/rasmus-valbro-h-jte">Soundcloud</a> and<!-- --><a href="https://www.youtube.com/@Cruize91/videos">YouTube</a></p></div></footer></article><nav class="blog-post-nav"><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/when-you-should-use-decorator-apis-over-class-attributes/">← <!-- -->When you should use decorator APIs over class attributes<!-- --></a></li><li></li></ul></nav></main><footer>© <!-- -->2023<!-- -->, Built with<!-- --> <!-- --><a href="https://www.gatsbyjs.com">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/how-to-fetch-a-certificate-thumbprint-from-azure-key-vault-in-your-azure-devops-pipelines/";window.___webpackCompilationHash="29aa06fb600f0fbcff5f";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-afa68794cf9a69af341a.js"],"app":["/app-100caf0d7dc71f703f82.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0fbb2b792de6323d227d.js"],"component---src-pages-index-js":["/component---src-pages-index-js-e08bcbd207e2e6da16a7.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-04ca9854e70215c34cef.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-4a532b2e74157d177946.js"]};/*]]>*/</script><script src="/polyfill-afa68794cf9a69af341a.js" nomodule=""></script><script src="/app-100caf0d7dc71f703f82.js" async=""></script><script src="/framework-6e6c9ea24de955c5e265.js" async=""></script><script src="/webpack-runtime-fd4191ea61e8fc60788e.js" async=""></script></body></html>